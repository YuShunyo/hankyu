<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>阪急阪神百货店VIP会员</title>
<style>
body {
    background-color: #f7f2ed;
    margin: 0;
    padding: 0;
}
.vertical-images {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}
.vertical-images img {
    max-width: 100%;
    height: auto;
}
.name {
    position: absolute;
    top: 14.8%;
    left: 50%;
    transform: translateX(-50%);
    color: rgb(21,20,20);
    font-size: 1.55em;
    font-family: system-ui, sans-serif;
    white-space: nowrap;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
}
.datetime {
    position: absolute;
    top: 19%;
    left: 50%;
    transform: translateX(-50%);
    color: rgb(246,7,7);
    font-size: 1.45em;
    font-weight: bold;
    font-family: system-ui, sans-serif;
    white-space: nowrap;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
}
</style>
</head>
<body>
<div class="vertical-images">
    <div class="name" id="name"></div>
    <div class="datetime" id="datetime"></div>
    <img id="cardImage" src="" alt="VIP卡背景">
</div>

<script>
function updateDateTime() {
  const now = new Date();
  const formatted = now.toLocaleString('zh-CN', {
    year: 'numeric', month: '2-digit', day: '2-digit',
    hour: '2-digit', minute: '2-digit', second: '2-digit'
  });
  document.getElementById('datetime').textContent = formatted;
}

async function loadCard() {
  const name = localStorage.getItem('userName');
  const cardOwner = localStorage.getItem('cardOwner');

  if (!name || !cardOwner) {
    window.location.href = 'inputGoldList.html';
    return;
  }

  document.getElementById('name').textContent = name;

  const res = await fetch('cardConfig.json');
  const data = await res.json();
  const imgPath = data[cardOwner] || 'img/default_card.png';

  // 加个时间戳防缓存
  document.getElementById('cardImage').src = `${imgPath}?v=${Date.now()}`;
}

setInterval(updateDateTime, 1000);
updateDateTime();
loadCard();
</script>
</body>
</html>
